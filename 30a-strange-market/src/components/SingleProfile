import React, { useState, useEffect } from "react";
import { useParams } from "react-router-dom";
import  fetchSingleUser from "../API/ajax-helpers";
import UserCard from "./UserCard";
import UserList from "../API/ajax-helpers";
import selectedUser from "../API/ajax-helpers";
import './App.css'


export default function SingleUser() {
    const { id } = useParams();
    const [user, setUser] = useState(null);
    const [error, setError] = useState(null);

useEffect(() => {
    async function getSingleUser() {
        const APIResponse = await fetchSingleUser(id);
        if (APIResponse.success) {
            setUser(APIResponse.data.user);
        } else {
            setError(error.message);
        }
    }
    getSingleUser();
                }, []);

        return (
        <div>
        {error && <p>{error}</p>}
        {user && <UserCard user={user} />}
        </div>);
};


export default function SingleUser({ users }) {
  const { userId } = useParams();
  const matchedUser = users.find((user) => { 
    return user.id == userId
  });

  return (
  <h1>{matchedUser.name}: {userId}</h1>
};



export default function SelectedUser() {
  const [selectedUser, setSelectedUser] = useState(null)

  return (
    <>
      { selectedUser ? (
        <SelectedUser
          myId={selectedUserId}
          pickMyId={setSelectedUserId}
        />
      ) : (
        <UserList chosenId={setSelectedUserId}/> 
      )}

    </>
  )
}

}